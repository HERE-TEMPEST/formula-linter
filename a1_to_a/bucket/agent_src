:..
:..

; если eof
;  0.
;    переложить все данные из буффера в выходящий и конец строки
;  1. 
;    Буффер пуст?
;      1. буффер не пустой 
;        сравнить с 1
;          1.
;            очистить буффер положить A в выходящий узел
;          0.
;            переложить все данные из буффера в выходящий и сам этот символ
;      0. буффер пустой ( if_full - 1 если полный, 0 - если пустой )
;        сравнить с А
;          1.
;            положить А в буффер
;          0.
;            положить в выходящий узел


CLONE LINK 3
#test/utility/extract
POP 2
#test/a1_to_a/compare_to_not_eol

CLONE LINK 5
CLONE LINK 5
CLONE LINK 5
CLONE 5
CLONE 5

; VALUE 0
; #test/utility/compare
; POP 2
; POP 2
; POP 2
; #test/prepare_for
; #test/a1_to_a/extract_buffer_eof
; #g/n
; FOR 2

; #test/example/prepare
; #test/example/result
; #g/n - buffer
; #test/a1_to_a/agent_src

; POP LINK 1
