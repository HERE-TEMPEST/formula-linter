:..
:..

POP 1 ; удаляем 1 на стеке
CLONE LINK 2
POP 3

; параметры агента
; первый узел - входящий
; второй узел - выходящий

; если eof
;  1.
;    переложить все данные из буффера в выходящий и сам этот символ
;  0. 
;    Буффер пуст?
;      1. буффер не пустой 
;        сравнить с 1
;          1.
;            очистить буффер положить A в выходящий узел
;          0.
;            переложить все данные из буффера в выходящий и сам этот символ
;      0. буффер пустой ( if_full - 1 если полный, 0 - если пустой )
;        сравнить с А
;          1.
;            положить А в буффер
;          0.
;            положить в выходящий узел


#stack_dump
CLONE LINK 2
#test/utility/extract
POP 2
#stack_dump
#test/a1_to_a/compare_to_not_eol
POP 2
#stack_dump


#test/prepare_for
#test/a1_to_a/agent
#g/n
#stack_dump
FOR 2
